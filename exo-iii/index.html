<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="utf-8"/>
    <style>  
 
.shadow{
    fill:#e2e2e2; stroke-width:0;
}           

.zoomout {
  position: absolute;
  border: 0px;
  top: 20px;
  left: 20px;
  width: 1000px;
  height: 660px;
  display: block;
}

.zoomin {
  position: absolute;
  border: 0px;
  top: 20px;
  left: 20px;
  width: 1000px;
  height: 660px;
    border: 1px solid #e2e2e2;
  display: none;
}

#zoominview img {
/*
  margin-left: auto;
  margin-right: auto;
*/
  position: absolute;
  top: 0px;
  left: 0px;
  display: block;
  cursor: pointer;
}
        
div.zoom-panel {
  position: absolute;
  border: 0px solid #000000;
}

div.panel {
  position: absolute;
  border: 1px solid #000000;
  cursor: pointer;
}

div.panel-noclick {
  position: absolute;
  border: 1px solid #000000;
}
        

        

</style>
</head>
<body>
    <div id="zoomoutview" class="zoomout">
        
        
        <div class="panel" style="  
  top: 20px;
  left: 20px;
  width: 300px;
  height: 300px;"
               onclick="klikaj('zoomoutview', 'zoominview', 0)">
<img src="https://clairesworld.github.io/exo-iii/img/0.gif" alt="TITLE" style="width: 100%">
</div>
        
        <div class="panel" style="  
  top: 20px;
  left: 350px;
  width: 140px;
  height: 140px;"
             onclick="klikaj('zoomoutview', 'zoominview', 1)">
<img src="https://clairesworld.github.io/exo-iii/img/1.gif" alt="INTRO 1" style="width: 100%">
</div>
        
        
        
<div class="panel" style="  
  top: 20px;
  left: 510px;
  width: 140px;
  height: 140px;"
     onclick="klikaj('zoomoutview', 'zoominview', 2)">
<img src="https://clairesworld.github.io/exo-iii/img/2.gif" alt="INTRO 2" style="width: 100%">
</div>

<div class="panel" style="  
  top: 180px;
  left: 350px;
  width: 140px;
  height: 140px;"
     onclick="klikaj('zoomoutview', 'zoominview', 3)">
<img src="https://clairesworld.github.io/exo-iii/img/3.gif" alt="INTRO 3" style="width: 100%">
</div>

<div class="panel" style="  
  top: 180px;
  left: 510px;
  width: 140px;
  height: 140px;"
     onclick="klikaj('zoomoutview', 'zoominview', 4)">
<img src="https://clairesworld.github.io/exo-iii/img/4.gif" alt="INTRO 4" style="width: 100%">
</div>

<div class="panel-noclick" style="border: 0px;  
  top: 20px;
  left: 700px;
  width: 300px;
  height: 640px;">

  <div class="panel" style="  
    top: 0px;
    left: 0px;
    width: 300px;
    height: 200px;"
       onclick="klikaj('zoomoutview', 'zoominview', 5)">
    <img src="https://clairesworld.github.io/exo-iii/img/5.gif" alt="THERMAL HISTORY 1" style="width: 100%"> 
</div>

  <div class="panel-noclick" style="  
    top: 210px;
    left: 0px;
    width: 300px;
    height: 20px;">
   <img src="https://clairesworld.github.io/exo-iii/img/5a.gif" alt="DESCENT 1" style="width: 100%"> 
  </div>

  <div class="panel" style="  
    top: 240px;
    left: 0px;
    width: 300px;
    height: 120px;"
       onclick="klikaj('zoomoutview', 'zoominview', 6)">
    <img src="https://clairesworld.github.io/exo-iii/img/6.gif" alt="THERMAL HISTORY 2" style="width: 100%">  
  </div>

  <div class="panel-noclick" style="  
    top: 370px;
    left: 0px;
    width: 300px;
    height: 20px;"
       >
    <img src="https://clairesworld.github.io/exo-iii/img/6a.gif" alt="DESCENT 2" style="width: 100%"> 
  </div>


  <div class="panel" style="border: 0px;  
    top: 400px;
    left: 0px;
    width: 300px;
    height: 240px;"
       onclick="klikaj('zoomoutview', 'zoominview', 7)">
  <img src="https://clairesworld.github.io/exo-iii/img/7.gif" alt="THERMAL HISTORY 3" style="width: 100%"> 
  </div>

</div>

<div class="panel-noclick" style="  
  top: 360px;
  left: 20px;
  width: 50px;
  height: 300px;">
  <img src="https://clairesworld.github.io/exo-iii/img/8a.gif" alt="" style="width: 100%"> <!--id="btnLeft"-->
</div>

<div class="panel" style="  
  top: 360px;
  left: 90px;
  width: 255px;
  height: 300px;"
     onclick="klikaj('zoomoutview', 'zoominview', 8)">
  <img src="https://clairesworld.github.io/exo-iii/img/8.gif" alt="DYNAMIC TOPOGRAPHY SCALINGS" style="width: 100%"> 
</div>

<div class="panel-noclick" style="  
  top: 360px;
  left: 365px;
  width: 50px;
  height: 300px;">
  <img src="img/9a.gif" alt="" style="width: 100%"> <!--id="btnLeft"-->
</div>

<div class="panel" style="  
  top: 360px;
  left: 435px;
  width: 255px;
  height: 300px;"
     onclick="klikaj('zoomoutview', 'zoominview', 9)">
  <img src="https://clairesworld.github.io/exo-iii/img/9.gif" alt="OCEAN CAPACITY" style="width: 100%"> 
</div>
        
        
    </div>
    
    
    
    
    
    
    
    
<div id="zoominview" class="zoomin">
    
    <div style="position: absolute; top:0px; left:0px, height:20px; width:1000px; margin: 0; ">
        <!-- progress bar-->
        <div style="background-color:#ffffff;border-radius:0px;width:250px;height:8px;
                    position:absolute;right:350px; top:5px;border:1px solid #000000">
            <div style="background-color:red;border-radius:0px;width:25%;height:8px;"
                 id="progress-bar">
            </div>
        </div>
    </div>
    
    
    <div style="  position: absolute;
        top: 0px;
        left: 0px;
        width: 617px;
        height: 660px;">

        <div class="zoom-panel" style="  position: absolute;
            top: 40px;
            left: 90px;
            width: 527px;
            height: 620px;">
           <img src="https://clairesworld.github.io/exo-iii/img/1.gif" alt="image panel" style="width: 100%; border: 1px solid #000000"  id="imgClickAndChange" onclick="changeImage(-99)" >
        </div>
        <svg height="660" width="617" id="respond">
<!--        <polygon class="shadow" points="0,660 90,547 617,547 527,660" />-->
            <polygon class="shadow" points="0,587 90,547 617,547 362,660 0,660" />
        </svg> 
    </div>
    
    
    
    <div class="zoom-panel" style="  
        top: 40px;
        left: 580px;
        width: 413px;
        height: 527px;border: 0px;">
        


        
        <div style="  margin: 0;
                    position: absolute;
                    top: 35%;
                    left: 50%;
                    -ms-transform: translate(-50%, -50%);
                    transform: translate(-50%, -50%); 
                    ">
            <input type="button" id="playbtn" onclick="playAudio()" style="display: block;" value="Pick up headphones">
         </div>
        
                <div style="  margin: 0;
                            position: absolute;
                                top: 50%;
                            left: 50%;
                            height: 85px;
                            width: 34px;
                            -ms-transform: translate(-50%, -50%);
                            transform: translate(-50%, -50%); 
                    ">
            <img id="plinth" src="https://clairesworld.github.io/exo-iii/img/plinth.gif" alt="audio plinth" style="height: 100%;" onclick="playAudio()">
         </div>


        <div style="  margin: 0;
                        position: absolute;
                        top: 65%;
                        left: 50%;
                        -ms-transform: translate(-50%, -50%);
                        transform: translate(-50%, -50%);
                    ">
       <input type="button" onclick="klikaj('zoominview', 'zoomoutview', -99)" value="Step back">
        </div>

    </div>
</div>
    

        
        
    
<script>
    
var current = 0;    
var audio = new Audio("https://clairesworld.github.io/exo-iii/sound/1.mp3");
    
function klikaj(i, j, count) {
    document.getElementById(i).style.display='none';
    document.getElementById(j).style.display='block';
    pauseAudio();
    if (count>=0){
        current=count;
        changeImage(current)
    }
}
    
function changeImage(count) {
    if (count>=0  &&  count<=9){ // to manually set the image, call function with value 0-9, otherwise put in a random value outside this range
        current=count;
    }
    else if (current<9){
        current++;
    }
    else {
        current=0;
    }
    
    document.getElementById("imgClickAndChange").src = "https://clairesworld.github.io/exo-iii/img/"+String(current)+".gif";
    document.getElementById("progress-bar").style.width=String(100/9*current)+'%';
    makeShadow("imgClickAndChange")

     // update audio track
    audio.pause();
    audio = new Audio("https://clairesworld.github.io/exo-iii/sound/"+String(current)+".mp3");
    audio.load();
    // if already playing then resume play
    if (document.getElementById( "playbtn" ).value=="Put down headphones"){
        audio.play(); 
    }

}
  
var playAudio = function() {
  audio.play();
  document.getElementById( "playbtn" ).setAttribute( "onclick", "javascript: pauseAudio();" );
  document.getElementById( "playbtn" ).value="Put down headphones";
  document.getElementById( "plinth" ).setAttribute( "onclick", "javascript: pauseAudio();" );
  document.getElementById( "plinth" ).src = "https://clairesworld.github.io/exo-iii/img/plinth-empty.gif";
}

var pauseAudio = function() {
  audio.pause();
  document.getElementById( "playbtn" ).setAttribute( "onclick", "javascript: playAudio();" );
  document.getElementById( "playbtn" ).value="Pick up headphones";
  document.getElementById( "plinth" ).setAttribute( "onclick", "javascript: playAudio();" );
  document.getElementById( "plinth" ).src = "https://clairesworld.github.io/exo-iii/img/plinth.gif";
} 
    
    function makeShadow(ident){
        a = document.getElementById( ident );
        var h = a.clientHeight;
        var yi = 40;
        var y_bot0 = yi+527;
        var x_right0 = 617;
        var y = 40;
        var x1 = 0;
        var y1 = yi+h+y;
        if (y1 > 660){
            y1 = 660;
        }
        var x2 = 90;
        var y2 = yi+h;
        var x3 = x_right0;
        var y3 = yi+h;
        var x4 = y_bot0 - 90/y*(640-h);
        if (x4 < 0){
            x4 = 0;
        }
        var y4 = 660;
        var x5 = 0;
        var y5 = 660;
        
        var coords = "<polygon class='shadow' points='"+String(x1)+","+String(y1)+" "+String(x2)+","+String(y2)+" "+String(x3)+","+String(y3)+" "+String(x4)+","+String(y4)+" "+String(x5)+","+String(y5)+"' />";
        console.log('writing shadow, y'+String())
        document.getElementById( "respond" ).innerHTML = coords
    }

</script>

</body>
</html>
